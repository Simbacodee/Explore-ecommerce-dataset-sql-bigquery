# ğŸ“Š E-commerce User Behavior & Funnel Analysis (SQL â€“ BigQuery)

![ChatGPT Image 15_17_32 22 thg 6, 2025](https://github.com/user-attachments/assets/c3229216-4711-472e-a44d-f43257134274)

**Author**: Duong Chi Tuan  
**Date**: March 2025  
**Tools Used**: SQL

---

## ğŸ“‘ Table of Contents  
1. [ğŸ“Œ Background & Overview](#-background--overview)  
2. [ğŸ“‚ Dataset Description & Data Structure](#-dataset-description--data-structure)  
3. [ğŸ” Final Conclusion & Recommendations](#-final-conclusion--recommendations)

---

## ğŸ“Œ Background & Overview  

### Objective:
### ğŸ“– What is this project about? What Business Question will it solve?

This project analyzes **user behavior** on an **e-commerce website**, using the **Google Analytics sample dataset** and **SQL on BigQuery**. The goal is to uncover customer behavior trends and assess the effectiveness of **marketing channels** in attracting and converting users. The analysis begins by measuring key **engagement metrics** such as **visits**, **pageviews**, and **transactions** on a **monthly basis** to understand user interaction over time. It then evaluates the **bounce rate** and **revenue contribution** of each **traffic source**, helping to identify the **most valuable and high-quality channels** in terms of both traffic and revenue.
 
- Analyze key **engagement metrics** (**visit**, **pageviews**, **transactions**) by **month**
- Measure **bounce rate** and **revenue breakdown** by **traffic source**
- Compare **purchasing behavior** between **user types** and by **session**
- Uncover **product recommendations** based on **purchase patterns**
- Build a **conversion funnel** from **product view â†’ add to cart â†’ purchase**

### ğŸ‘¤ Who is this project for?  

- Data analysts & business intelligence professionals

- Marketing teams optimizing campaign performance

- Product managers and eCommerce decision-makers
 
---

## ğŸ“‚ Dataset Description & Data Structure  

### ğŸ“Œ Data Source  
- Source: The sample data is from Google Analytics 4 (GA4), exported to BigQuery, including user activity data from the Google Merchandise Store e-commerce website.  
- Size: ga4_obfuscated_sample_ecommerce
- ğŸ”— [Access the dataset here](https://console.cloud.google.com/bigquery?inv=1&invt=Ab1wuA&project=project-sql-453615&ws=!1m10!1m4!4m3!1sbigquery-public-data!2sgoogle_analytics_sample!3sga_sessions_20170801!1m4!1m3!1sproject-sql-453615!2sbquxjob_1998eeea_197d018f89f!3sUS)
---

## âš’ï¸ Main Process

### 1. Calculate total visit, pageview, transaction for Jan, Feb and March 2017 (order by month)

This query aggregates key user engagement metrics â€” including **visits**, **pageviews**, and **transactions** â€” on a **monthly basis** for January through March 2017, allowing us to observe trends in traffic and user activity over time.

âš¡Queries

![image](https://github.com/user-attachments/assets/f1166d9a-6d9e-447d-81d2-ecf8742e4060)

ğŸ’¡ Queries result  

![image](https://github.com/user-attachments/assets/64503f79-f4a3-47eb-be5c-a779368c71fc)  

ğŸ” Observation  
The number of **visits** and **pageviews** remained relatively stable across the first three months of 2017, with a slight increase in March. **Transactions** saw a noticeable rise in March, reaching 993 compared to 713 in January and 733 in February.

### 2. Bounce rate per traffic source in July 2017 

This query calculates the **bounce rate** for each **traffic source** in **July 2017**, by dividing the total number of bounces by the total number of visits. It helps identify which sources are bringing engaged users versus those with low interaction.

âš¡Queries

![image](https://github.com/user-attachments/assets/d870a107-5663-4f90-8d36-6416f1c49dd2)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/50b14315-dba5-4ac7-9633-861dc172abf8)  

ğŸ” Observation  
Among all traffic sources in July 2017, **Google** drove the highest number of visits (38,400) but had a moderate **bounce rate** of 51.56%. Notably, **youtube.com** and **m.facebook.com** had high bounce rates of **66.73%** and **64.28%**, respectively, indicating lower user engagement. In contrast, **mail.google.com** and **plus.google.com** had significantly lower bounce rates (24.75% and 25.00%), suggesting users from these sources were more likely to interact with the site.


### 3. Revenue by traffic source by week, by month in June 2017  

This query retrieves the **total revenue** generated by each **traffic source** in **June 2017**, broken down by both **month** and **week**. It helps compare channel performance over different time granularities to detect consistent high-performing sources or short-term fluctuations.

âš¡Queries

![image](https://github.com/user-attachments/assets/0ef81d6c-55d1-4467-97da-36535d65ac67)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/b9740ada-2c20-468d-9a59-c24be96dc3a9)  

ğŸ” Observation  
In June 2017, the **(direct)** channel generated the highest overall revenue, reaching over **$97,333**, followed by **Google** ($18,757) and **dfa** ($8,862). On a weekly level, direct traffic maintained its dominance consistently, particularly during **Week 24** and **Week 25**, where it peaked at over **$30,908** and **$27,295**, respectively. Other sources like **mail.google.com**, **dfa**, and **google.com** also showed noticeable contributions across multiple weeks, indicating a mix of high-performing paid and organic traffic sources.

### 4. Average number of pageviews by purchaser type (purchasers vs non-purchasers) in June, July 2017

This query compares the **average number of pageviews per user** between two segments â€” **purchasers** and **non-purchasers** â€” for **June and July 2017**. The result highlights differences in browsing behavior that may influence conversion likelihood.

âš¡Queries

![image](https://github.com/user-attachments/assets/99fdb9ee-a8b8-4cce-960f-c2e5d10db408)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/5c8a70d4-40e1-4771-9bd6-6612289227de)  

ğŸ” Observation  
In both June and July 2017, **non-purchasers** viewed significantly more pages per user than **purchasers**. For example, in July, non-purchasers had an average of **334.06** pageviews per user, compared to **124.24** for purchasers. This suggests that higher browsing activity does not necessarily translate into purchases.

### 5. Average number of transactions per user that made a purchase in July 2017

This query calculates the **average revenue per user per visit** in **July 2017**, by dividing total product revenue by the number of total visits. It helps assess how much value each session contributes on average â€” a useful metric to evaluate traffic quality and monetization performance.

âš¡Queries

![image](https://github.com/user-attachments/assets/47c084a6-5023-4dea-883d-fce11077785e)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/5c8a70d4-40e1-4771-9bd6-6612289227de)  

ğŸ” Observation  
In July 2017, the **average revenue per user per visit** was approximately **$4.16**. This figure provides a useful benchmark for how much revenue each individual session generates on average.

### 6. Average amount of money spent per session. Only include purchaser data in July 2017

This query calculates the **average amount of money spent per session** by users who made at least one purchase in **July 2017**. It divides total product revenue by the number of visits, focusing only on sessions that generated transactions.

âš¡Queries

![image](https://github.com/user-attachments/assets/2f70597f-7cdf-4079-94da-bd39dd8a79c9)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/9e61817d-1018-4836-85b4-2e2ee37ad20d)  

ğŸ” Observation  
In July 2017, users who made a purchase generated an average of **$43.86 per visit**. This indicates that converting sessions were highly valuable, making this a key metric for evaluating the ROI of traffic sources that lead to purchases.

### 7. Other products purchased by customers who purchased product "YouTube Men's Vintage Henley" in July 2017. Output should show product name and the quantity was ordered

This query identifies **other products purchased** by users who bought **"YouTube Men's Vintage Henley"** in **July 2017**. It helps uncover product bundling or cross-selling patterns by listing additional products and their total quantities purchased by the same group of users.

âš¡Queries

![image](https://github.com/user-attachments/assets/f6a39000-e02b-463a-912b-a848127e5b9a)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/04d472d1-c1b0-4a30-99a7-42c2d3f4e992)  

ğŸ” Observation  
Customers who purchased **"YouTube Men's Vintage Henley"** also frequently bought a wide range of accessories and branded merchandise. The most popular complementary items included the **Google 22 oz Water Bottle** (1,131 units), **Sport Bag** (578), and **Google Kick Ball** (549). Several types of journals, pens, and apparel also appeared frequently, indicating a strong interest in **functional branded items**. This suggests opportunities for **bundle promotions** combining drinkware, journals, and T-shirts.

### 8. Calculate cohort map from product view to addtocart to purchase in Jan, Feb and March 2017

This query builds a **monthly conversion funnel** from **product view** to **add to cart** to **purchase**, for the period of **January to March 2017**. By counting product-level events at each stage and calculating conversion rates, it helps measure how effectively product interest translates into actual sales.

âš¡Queries

![image](https://github.com/user-attachments/assets/1672c27d-8cb2-49a0-9066-887de56fe57c)

ğŸ’¡ Queries result

![image](https://github.com/user-attachments/assets/1b0812ae-b308-4d11-9bcf-6e5eeba732e0)  

ğŸ” Observation  
From January to March 2017, there was a consistent increase in both **add-to-cart rate** and **purchase rate**. The **add-to-cart rate** grew from **28.47%** in January to **37.29%** in March, while the **purchase rate** improved from **8.31%** to **12.64%**. This indicates a positive trend in user engagement and conversion efficiency over the three-month period.

---

## ğŸ” Final Conclusion & Recommendations  
### ğŸ“Š Insights (Based on AICCR Funnel Analysis)

- **Google Search** and **Direct** are the top-performing traffic sources, driving the highest number of visits with relatively low bounce rates â€” indicating high-quality traffic.
- Channels like **YouTube**, **t.co**, and **Facebook** have extremely high bounce rates (above 65%), suggesting users from these sources often leave without interacting.
- **Non-purchasing users view 2â€“3 times more pages than purchasing users**, which implies strong browsing behavior but low conversion intent.
- Both **add-to-cart rate** and **purchase rate** steadily increased from **January to March**, indicating improved engagement or optimization efforts.
- The **purchase rate** rose from **8.31% â†’ 12.64%**, reflecting a notable improvement in conversion.
- **Average revenue per purchasing session is around $43.86**, indicating high transaction value per converted user.
- Customers who bought the **YouTube Men's Vintage Henley** frequently purchased other merchandise products, signaling strong **cross-sell potential**.

### âœ… Recommendations

- **Invest more in Google Search and Direct traffic channels**, as they deliver the most valuable and engaged users.
- **Optimize landing pages for high-bounce channels** (e.g., YouTube, Facebook) by improving relevance, UX, and load speed.
- **Implement remarketing strategies** for high-engagement, non-converting users â€” offering targeted promotions or follow-up emails.
- **Introduce product bundling or cross-sell features**, especially for items like the Henley shirt which often accompany other purchases.
- **A/B test key areas** such as product detail layouts, call-to-action buttons, and checkout steps to increase add-to-cart and purchase rates.
- **Launch loyalty programs or retention email flows** to encourage repeat purchases from high-value customers.
- **Monitor funnel performance monthly**, especially metrics like product views, add-to-cart rate, and conversion rate, to stay responsive to behavior shifts.



